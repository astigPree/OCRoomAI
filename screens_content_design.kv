
#:import screenTransition kivy.uix.screenmanager.WipeTransition

# ------------------------ Guest Screens ----------------------
<LocationImageContainer>:
    orientation : 'vertical'
    locationName : locationName
    locationImage : locationImage
    spacing : min(self.size) * 0.03

    BoxLayout :
        size_hint : 1 , 0.8
        padding : [ dp(20) , dp(10) , dp(20) , dp(10) ]
        canvas.before:
            Color:
                rgba : chex('f0f3f4')
            RoundedRectangle:
                pos : self.pos
                size : self.size
                radius : ( min(self.size) * 0.05, )

        Image:
            id : locationImage
            allow_stretch : True
            keep_ratio : False
            source : 'pictures/2.jpg'

    Label:
        id : locationName
        size_hint : 1 , 0.2
        text : "ROOM 501"
        font_name : 'title_font'
        font_size : min(root.size) * 0.1
        color : chex('f0f3f4')


<LocationInformationContainer>:
    orientation: 'vertical'
    spacing : dp(5)

    title : title
    info : info

    canvas.before:
        Color:
            rgba : chex('f0f3f4')
        RoundedRectangle:
            pos : self.pos
            size : self.size
            radius : ( min(self.size) * 0.05, )

    Label:
        id : title
        size_hint : 1 , None
        height: self.texture_size[1] + ( min(root.size)  * 0.1 )
		font_size : min(root.size) * 0.1
        text : "DIRECTIONS"
        font_name : "title_font"
        color : chex("620609")

        canvas.before:
            Color:
                rgba : chex("dabbbb")
            RoundedRectangle:
                pos : self.pos
                size : self.size
                radius : ( min(self.parent.size) * 0.05, )

    ScrollView:
        MDGridLayout:
            adaptive_height : True
            cols : 1
            padding : [ dp(5) , dp(0) , dp(5) , dp(0) ]

            Label:
                id : info
                size_hint : 1 , None
                font_name : "content_font"
                height: self.texture_size[1]
                text_size: self.width, None
                color : chex("620609")
                markup : True
                font_size : min(root.size) * 0.07



<LocationScreenInformation>:
    opacity : 0
    image1 : image1
    image2 : image2
    directions : directions
    information : information

    canvas.before:
        Color:
            rgba : chex('#620609')
        RoundedRectangle:
            pos: self.pos
            size : self.size
            radius : ( min(self.size) * 0.030 ,)

    FloatLayout:

        BoxLayout:
            orientation : 'vertical'
            pos_hint : { "x" : 0.08 , "center_y" : 0.5 }
            size_hint : 0.5 , 0.92
            spacing : min(self.size) * 0.04

            LocationImageContainer:
                id : image1
                size_hint : 0.5 , 1


            LocationImageContainer:
                id : image2
                size_hint : 0.5 , 1

        LocationInformationContainer:
            id : directions
            pos_hint : { "x" : 0.4 , "center_y" : 0.5}
            size_hint : 0.26 , 0.9

        LocationInformationContainer:
            id : information
            pos_hint : { "x" : 0.68 , "center_y" : 0.5}
            size_hint : 0.26 , 0.9


<GuestScreen>:

    screens_handler : screens_handler

    ScreenManager:
        transition : screenTransition(clearcolor=[1 , 1 , 1 , 0 ])
        id : screens_handler



# ------------------------ Faculty Screens ---------------------
<FacultyWarningActionsModalView>:
    background_color : 0 , 0 , 0, 0
    overlay_color : 0, 0, 0, 0

    canvas.before:
        Color:
            rgb : chex('7f0f0f')
            a : 0.8
        Rectangle:
            pos : self.pos
            size : self.size

    BoxLayout:
        size_hint : 0.5, 0.6
        pos_hint : { 'center_x' : 0.5 , 'center_y' : 0.5 }
        orientation : 'vertical'
        padding : min(self.size) * 0.05
        spacing : min(self.size) * 0.01

        canvas.before:
            Color :
                rgba : chex('f0f3f4')
            RoundedRectangle:
                pos : self.pos
                size : self.size
                radius : ( min(self.size) * 0.1, )

        ScrollView:
            size_hint : 1 , 0.8

            MDGridLayout:
                adaptive_height : True
                cols : 1

                Label:
                    text : "A" * 670
                    size_hint : 1, None
                    text_size: self.width - dp(20), None
                    height : self.texture_size[1]
                    font_size : min(root.size) * 0.04
                    color : chex('7f0f0f')

        BoxLayout:
            size_hint : 1 , 0.2
            padding : min(self.size) * 0.2
            spacing : min(self.size) * 0.3

            ChangeFacultyInfoModalViewButtonUpdate:

            ChangeFacultyInfoModalViewButtonCancel:
                on_release:
                    root.dismiss()

<AddFacultyScheduleModalView>:
    background_color : 0 , 0 , 0, 0
    overlay_color : 0, 0, 0, 0

    location_dropdown : location_dropdown

    canvas.before:
        Color:
            rgb : chex('7f0f0f')
            a : 0.8
        Rectangle:
            pos : self.pos
            size : self.size

    BoxLayout:
        size_hint : 0.5, 0.6
        pos_hint : { 'center_x' : 0.5 , 'center_y' : 0.5 }
        orientation : 'vertical'
        padding : min(self.size) * 0.05
        spacing : min(self.size) * 0.01

        canvas.before:
            Color :
                rgba : chex('f0f3f4')
            RoundedRectangle:
                pos : self.pos
                size : self.size
                radius : ( min(self.size) * 0.1, )

        BoxLayout:
            size_hint : 1 , 0.15
            padding : ( min(self.size) * 0.3 , 0 , min(self.size) * 0.3 , 0 )

            Label:
                text : "L O C A T I O N :"
                font_name : "title_font"
                font_size : min(self.size) * 0.45
                size_hint : 0.4 ,1
                color : "black"

            MDFillRoundFlatButton :
                id : location_dropdown
                size_hint : 0.6 , 0.9
                md_bg_color : chex('7f0f0f')
                text : "Select Location"
                font_size : min(self.size)  * 0.25
                font_name : "title_font"

                on_release:
                    root.dropdown_list.open(*args)

        BoxLayout:
            size_hint : 1 , 0.6
            orientation : 'vertical'

            BoxLayout:
                size_hint : 1 , 0.5

                AddFacultyScheduleModalViewLabel:
                    text : "START TIME"

                AddFacultyScheduleModalViewLabel:
                    text : "END TIME"

            BoxLayout:
                size_hint : 1 , 0.2
                padding : [ dp(20) , dp(0) , dp(20) , dp(0) ]
                spacing : dp(30)

                FacultyTimePickerButton:
                    text : root.time_start
                    size_hint : 0.5 , 1
                    font_size : min(root.size) * 0.03
                    on_release:
                        root.time_selections.start_time_picker.open()

                FacultyTimePickerButton:
                    text : root.time_start
                    size_hint : 0.5 , 1
                    font_size : min(root.size) * 0.03
                    on_release:
                        root.time_selections.end_time_picker.open()

            Widget :
                size_hint : 1 , 0.3

        BoxLayout:
            size_hint : 1 , 0.2
            padding : min(self.size) * 0.2
            spacing : min(self.size) * 0.3

            ChangeFacultyInfoModalViewButtonUpdate:

            ChangeFacultyInfoModalViewButtonCancel:
                on_release:
                    root.dismiss()


<ChangeFacultyInfoModalView>:
    background_color : 0 , 0 , 0, 0
    overlay_color : 0, 0, 0, 0

    teacher_name : teacher_name
    teacher_info : teacher_info

    canvas.before:
        Color:
            rgb : chex('7f0f0f')
            a : 0.8
        Rectangle:
            pos : self.pos
            size : self.size

    BoxLayout:
        size_hint : 0.5, 0.6
        pos_hint : { 'center_x' : 0.5 , 'center_y' : 0.5 }
        orientation : 'vertical'
        padding : min(self.size) * 0.05
        spacing : min(self.size) * 0.01

        canvas.before:
            Color :
                rgba : chex('f0f3f4')
            RoundedRectangle:
                pos : self.pos
                size : self.size
                radius : ( min(self.size) * 0.1, )

        BoxLayout:
            size_hint : 1 , 0.2

            Label:
                text : "N A M E :"
                font_name : "title_font"
                font_size : min(self.size) * 0.4
                size_hint : 0.3 ,1
                color : "black"

            BoxLayout :
                size_hint : 0.7 , 1
                padding : min(self.size) * 0.1
                canvas.before:
                    Color:
                        rgba: chex('7f0f0f')
                    RoundedRectangle:
                        pos : self.pos
                        size : self.size
                        radius : ( min(self.size) * 0.1, )

                TextInput :
                    id : teacher_name
                    size_hint : 1 , 1
                    background_color : 0, 0 , 0 , 0
                    cursor_color : chex('f0f3f4')
                    foreground_color : chex('f0f3f4')
                    multiline : False
                    font_name : "content_font"
                    font_size : min(self.size) * 0.52
                    valign : "center"


        BoxLayout:
            size_hint : 1 , 0.6
            orientation : 'vertical'

            Label:
                text : "I N F O R M A T I O N : "
                font_name : "title_font"
                font_size : min(self.size) * 0.4
                size_hint : 1 , 0.3
                color : "black"
                text_size: self.width, None

            BoxLayout :
                size_hint : 1 , 0.7
                padding : min(self.size) * 0.1
                canvas.before:
                    Color:
                        rgba: chex('7f0f0f')
                    RoundedRectangle:
                        pos : self.pos
                        size : self.size
                        radius : ( min(self.size) * 0.1, )

                TextInput :
                    id : teacher_info
                    size_hint : 1 , 1
                    background_color : 0, 0 , 0 , 0
                    cursor_color : chex('f0f3f4')
                    foreground_color : chex('f0f3f4')
                    multiline : True
                    font_name : "content_font"
                    font_size : min(self.size) * 0.15
                    valign : "center"



        BoxLayout:
            size_hint : 1 , 0.2
            padding : min(self.size) * 0.2
            spacing : min(self.size) * 0.3

            ChangeFacultyInfoModalViewButtonUpdate:
                on_release:
                    root.updateParentInfo()

            ChangeFacultyInfoModalViewButtonCancel:
                on_release:
                    root.dismiss()


<ScheduleContainer>:
    size_hint : 1, None
    height : self.width * 0.07
    canvas.before:
        Color:
            rgba : chex("f0f3f4")
        RoundedRectangle:
            pos: self.pos
            size : self.size
            radius : ( min(self.size) * 0.01, )

    Label:
        size_hint : None , 1
        width : root.size[0] / len(root.children)
        text : root.room
        font_name : "content_font"
        font_size : min(self.size) * 0.5
        color : chex("620609")

    Label:
        size_hint : None , 1
        width : root.size[0] / len(root.children)
        text : root.schedule
        font_name : "content_font"
        font_size : min(self.size) * 0.5
        color : chex("620609")

    BoxLayout:
        size_hint : None , 1
        width : root.size[0] / len(root.children)
        spacing : min(self.size) * 0.2
        padding : min(self.size) * 0.1

        Widget:
            size_hint : 0.2 , 1

        MDIconButton:
            icon : "update"
            font_size : min(self.parent.size) * 0.5
            size_hint : 0.3 , 1
            theme_icon_color: "Custom"
            icon_color: chex('0da42e')

        Widget:
            size_hint : 0.2 , 1

        MDIconButton:
            icon : "delete-forever"
            font_size : min(self.parent.size) * 0.5
            size_hint : 0.3 , 1
            theme_icon_color: "Custom"
            icon_color: chex('bf090f')

            on_release:
                root.deleteSchedule(root.parent_index)

        Widget:
            size_hint : 0.2 , 1


<TeachersScreen>:

    teacher_schedule : teacher_schedule
    teacher_image : teacher_image
    teacher_name : teacher_name
    teacher_info : teacher_info

    FloatLayout:
        size_hint : 1, 1
        canvas.before:
            Color:
                rgba : chex("eff3f4")
            RoundedRectangle:
                pos : self.pos
                size : self.size
                radius : ( min(self.size) * 0.08, )

        # Teacher Image
        Image:
            id : teacher_image
            size_hint : 0.3 , 0.37
            pos_hint : { "top" : 0.93 , "x" : 0.05 }
            source : "pictures/my_picture.jpg"

        # Teacher Name
        Label:
            id : teacher_name
            size_hint : 0.5 , 0.1
            pos_hint : { "top" : 0.92 , "x" : 0.38 }
            text : "Ericson Mark A. Guanzon"
            font_name : "title_font"
            text_size: self.width - dp(20), None
            height : self.texture_size[1]
            font_size : min(self.parent.size) * 0.04

            canvas.before:
                Color:
                    rgba : chex("7f0f0f")
                RoundedRectangle:
                    pos : self.pos
                    size : self.size
                    radius : ( min(self.size) * 0.08, )

        #Teacher Information
        ScrollView:
            size_hint : 0.5 , 0.23
            pos_hint : { "top" : 0.8 , "x" : 0.38 }

            canvas.before:
                Color:
                    rgba : chex("7f0f0f")
                RoundedRectangle:
                    pos : self.pos
                    size : self.size
                    radius : ( min(self.size) * 0.08, )

            MDGridLayout:
                adaptive_height: True
                cols : 1
                padding : dp(5)

                FacultyScreenLabelForInformation:
                    id : teacher_info

        #Teacher Schedule Time
        BoxLayout:
            orientation : 'vertical'
            size_hint : 0.63 , 0.47
            pos_hint: { 'x' : 0.05 , 'y' : 0.05 }
            canvas.before:
                Color:
                    rgba : chex("7f0f0f")
                Rectangle:
                    pos : self.pos
                    size : self.size

            FacultyScreenHeadingHolderBoxLayout:
                size_hint : 1,  0.15

            ScrollView:
                size_hint : 1,  0.85

                MDGridLayout:
                    id : teacher_schedule
                    adaptive_height : True
                    cols : 1
                    spacing : min(self.parent.size) * 0.02
                    padding : min(self.size) * 0.1


        # Teacher Activity
        BoxLayout:
            orientation: 'vertical'
            size_hint : 0.25 , 0.42
            pos_hint: { 'right' : 0.97 , 'y' : 0.08 }
            canvas.before:
                Color:
                    rgba : chex("7f0f0f")
                RoundedRectangle:
                    pos : self.pos
                    size : self.size
                    radius : ( min(self.size) * 0.05, )

            Label:
                size_hint : 1 , 0.25
                text : "ACTIVITY"
                color : chex("7f0f0f")
                font_size : min(self.size) * 0.5
                font_name : "title_font"
                canvas.before:
                    Color:
                        rgba : chex("dabbbb")
                    RoundedRectangle:
                        pos : self.pos
                        size : self.size
                        radius : ( min(self.parent.size) * 0.05, )

            BoxLayout:
                orientation : 'vertical'
                size_hint: 1 , 0.75
                padding :  min(self.size) * 0.1
                spacing : min(self.size) * 0.03

                FacultyScreenActivityButton:
                    text : "Change Info"
                    color : chex("620609")
                    on_release:
                        root.change_faculty_info.open()

                FacultyScreenActivityButton:
                    text : "Add Schedule"
                    color : chex("620609")

                    on_release:
                        root.add_schedule.open()

                FacultyScreenActivityButton:
                    text : "Apply Change"
                    color : chex('0da42e')

                    on_release :
                        root.warning.open()

                FacultyScreenActivityButton:
                    text : "Reset Schedule"
                    color : chex('bf090f')

                    on_release :
                        root.resetSchedule()
                        root.warning.open()


<NavigationButton>:
    font_size : ( min(self.size) * 0.67 ) - ( len(self.text) * 0.43) if len(self.text) > 10 else (min(self.size) * 0.5 )
    font_name : "content_font"
    background_down : ""
    background_color : 0, 0 , 0, 0
    size_hint : 1 , None
    height : min(self.parent.parent.size) * 0.15 if self.parent else dp(100)
    font_name : "title_font" if self.isSelected else "content_font"
    color : self.activity_colors['selected'][1] if self.isSelected else self.activity_colors['unselected'][1]

    canvas.before:
        Color:
            rgba : self.activity_colors['selected'][0] if self.isSelected else self.activity_colors['unselected'][0]
        RoundedRectangle:
            pos : self.pos
            size : self.size
            radius : ( min(self.size) * 0.6, )

    on_release:
        self.command()

<FacultyScreen>:

    navigation_buttons : navigation_buttons
    navigation_screens : navigation_screens

    BoxLayout:
        canvas.before:
            Color:
                rgba : chex('#620609')
            RoundedRectangle:
                pos: self.pos
                size : self.size
                radius : ( min(self.size) * 0.030 ,)
        padding: dp(25)
        spacing : dp(15)

        # Faculty Navigator ==========================================>
        BoxLayout:
            size_hint: 0.35 , 1
            orientation : 'vertical'
            canvas.before:
                Color:
                    rgba : chex('eff3f4')
                RoundedRectangle:
                    pos : self.pos
                    size : self.size
                    radius : ( min(self.size) * 0.09, )

            FacultyScreenTitleNav:
                size_hint: 1 , 0.1

            ScrollView:
                size_hint : 1 , 0.8

                MDGridLayout:
                    id : navigation_buttons
                    adaptive_height: True
                    spacing : dp(5)
                    cols : 1
                    padding : [ dp(5) , dp(20) , dp(5), dp(0) ]


        # Faculty Screens
        ScreenManager:
            id : navigation_screens




<DeveloperScreen>:



# ======================= ADDITIONAL DESIGN =================================

#                     ------------------ FACULTY SCREEN --------------
<ChangeFacultyInfoModalViewButtonCancel@Button>:
    background_color : 0 , 0, 0, 0
    background_down : ""
    font_name : "content_font"
    font_size : min(self.size) * 0.5
    text : "12:00"

    canvas.before:
        Color :
            rgba : chex('7f0f0f')
        RoundedRectangle:
            pos : self.pos
            size : self.size
            radius : ( min( self.size) * 0.5 ,)

<AddFacultyScheduleModalViewLabel@Label>:
    font_size: min(self.size) * 0.3
    font_name : "title_font"
    color : "black"

<ChangeFacultyInfoModalViewButtonCancel@Button>:
    background_color : 0 , 0, 0, 0
    background_down : ""
    font_name : "title_font"
    font_size : min(self.size) * 0.5
    text : "CANCEL"

    canvas.before:
        Color :
            rgba : chex('bf090f')
        RoundedRectangle:
            pos : self.pos
            size : self.size
            radius : ( min( self.size) * 0.5 ,)

<ChangeFacultyInfoModalViewButtonUpdate@Button>:
    background_color : 0 , 0, 0, 0
    background_down : ""
    font_name : "title_font"
    font_size : min(self.size) * 0.5
    text : "UPDATE"

    canvas.before:
        Color :
            rgba : chex('0da42e')
        RoundedRectangle:
            pos : self.pos
            size : self.size
            radius : ( min( self.size) * 0.5 ,)

<FacultyScreenActivityButton@Button>:
    background_color : 0 , 0, 0, 0
    background_down : ""
    font_name : "title_font"
    font_size : min(self.size) * 0.5

    canvas.before:
        Color :
            rgba : chex('ffffff')
        RoundedRectangle:
            pos : self.pos
            size : self.size
            radius : ( min( self.size) * 0.5 ,)


<FacultyScreenHeadingHolderBoxLayout@BoxLayout>:
    canvas.before:
        Color:
            rgba : chex("dabbbb")
        Rectangle:
            pos: self.pos
            size : self.size

    Label:
        size_hint : None , 1
        width : root.size[0] / len(root.children)
        text : "LOCATION"
        font_name : "title_font"
        font_size : min(self.size) * 0.5
        color : chex("620609")
    Label:
        size_hint : None , 1
        width : root.size[0] / len(root.children)
        text : "TIME - TIME"
        font_name : "title_font"
        font_size : min(self.size) * 0.5
        color : chex("620609")
    Label:
        size_hint : None , 1
        width : root.size[0] / len(root.children)
        text : "ACTIONS"
        font_name : "title_font"
        font_size : min(self.size) * 0.5
        color : chex("620609")



<FacultyScreenLabelForInformation@Label>:
    size_hint : 1, None
    text : "Ericson Mark A. Guanzon"
    font_name : "content_font"
    text_size: self.width - dp(20), None
    height : self.texture_size[1]
    font_size : min(self.parent.parent.size) * 0.13


<FacultyScreenTitleNav@Label>:
    text: "TEACHERS"
    font_name : "title_font"
    color : chex("620609")
    font_size : min(self.size) * 0.5
    canvas.before:
        Color:
            rgba : chex('DABBBB')
        RoundedRectangle:
            pos : self.pos
            size : self.size
            radius : ( min(self.size) * 0.4, )

<FacultySelectionLocationDropdownContent>:
    orientation : 'vertical'
    adaptive_height : True
    md_bg_color : chex('DABBBB')
    padding : dp(10)
    spacing : dp(5)
    radius : ( 24 , )

<FacultyTimePickerButton@MDFillRoundFlatButton>:
    md_bg_color : chex("620609")
    font_name : "title_font"
    text : "Select Time"